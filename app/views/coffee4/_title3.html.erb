<h2 class="textbook-section-title" id="title3"><strong>3 : 画像の判別</strong></h2>
<h4 id="coffee-chapter7-3">
  <strong>条件分岐を使って、画像の表示・非表示を設定してみましょう！</strong>
  <hr class="red-hr">
  会員の画像があるかないかの判別は、前に説明した<strong>「<u>present?</u>」</strong>で判別します。
  <br>
  <small>※　詳細は<a href="/coffee_cups/6#title3-3" target="_blank"><strong>こちら</strong></a>を参考にして下さい</small>
  <br><br>
  なので大体このように設定します。
  <br><br>
<table class='highlight'>
<tr>
<td class='code-line-no text-center'>1
2
3
4
5
</td>
<td class='code-content'><span class='code-line'>&lt;% <span class="word-red">if</span> @user.image.present? %&gt;</span>
<span class='code-line'>  &lt;%= image_tag @user.image.url(<span class='word-purple'>:medium</span>) %&gt;</span>
<span class='code-line'>&lt;% <span class="word-red">else</span> %&gt;</span>
<span class='code-line'>  &lt;<span class='word-red'>h4</span>&gt;画像はありません&lt;/<span class='word-red'>h4</span>&gt;</span>
<span class='code-line'>&lt;% <span class="word-red">end</span> %&gt;</span>
</td>
</tr>
</table>
  <br>
  では
  <strong>
  <ul class="number_ul">
    <li>「<u>users</u>」データベースの「<u>show</u>」ページ</li>
    <%= link_to image_tag("https://s3.amazonaws.com/rails-textbook/rails_for_sfc/images/coffee4/Chrome_messages_users_2_no_image.png",
                          :width => "90%",
                          :class => "hover_img textbook-title-img"),
                "https://s3.amazonaws.com/rails-textbook/rails_for_sfc/images/coffee4/Chrome_messages_users_2_no_image.png",
                :target => ["_blank"] %>
    <li>「<u>users</u>」データベースの「<u>edit</u>」ページ</li>
    <%= link_to image_tag("https://s3.amazonaws.com/rails-textbook/rails_for_sfc/images/coffee4/Chrome_messages_users_1_edit_no_image.png",
                          :width => "90%",
                          :class => "hover_img textbook-title-img"),
                "https://s3.amazonaws.com/rails-textbook/rails_for_sfc/images/coffee4/Chrome_messages_users_1_edit_no_image.png",
                :target => ["_blank"] %>
  </ul>
  </strong>
  の2つで設定を加えてみます。
  <br><br>
  <i class="fa fa-arrow-right"></i>　<strong>まずは「<u>users</u>」データベースの「<u>show</u>」ページに設定を加えます。</strong>
  <br><br>
  <strong>「<u>app > views > users > show.html.erb</u>」</strong>の内容を下のように変更して下さい。
  <br><br>
  <i class="fa fa-file color-red"></i>　<strong>show.html.erb（5、8〜10行目を追加）</strong>
  <br>
  <small>※　半角英数字で入力。変更が完了したら「Command」と「s」を一緒に押して内容を保存して下さい。</small>
<table class='highlight'>
<tr>
<td class='code-line-no text-center'>1
2
3
4
<strong class="color-red">5</strong>
6
7
<strong class="color-red">8
9
10
11</strong>
12
...
</td>
<td class='code-content'><span class='code-line'>&lt;<span class='word-red'>div</span><span class='word-green'> class</span>=<span class='word-yellow'>"row"</span>&gt;</span>
<span class='code-line'>  &lt;<span class='word-red'>div</span><span class='word-green'> class</span>=<span class='word-yellow'>"col-xs-6"</span>&gt;</span>
<span class='code-line'>    &lt;<span class='word-red'>h1</span>&gt;ユーザー情報&lt;/<span class='word-red'>h1</span>&gt;</span>
<span class='code-line'>    &lt;<span class='word-red'>hr</span>&gt;</span>
<span class='code-line remarkable-code'>    &lt;% <span class="word-red">if</span> @user.image.present? %&gt;</span>
<span class='code-line'>      &lt;%= image_tag @user.image.url(<span class='word-purple'>:medium</span>) %&gt;</span>
<span class='code-line'>      &lt;<span class='word-red'>br</span>&gt;&lt;<span class='word-red'>br</span>&gt;</span>
<span class="remarkable-code"><span class='code-line'>    &lt;% <span class="word-red">else</span> %&gt;</span>
<span class='code-line'>      &lt;<span class='word-red'>h4</span>&gt;画像はありません&lt;/<span class='word-red'>h4</span>&gt;</span>
<span class='code-line'>    &lt;% <span class="word-red">end</span> %&gt;</span></span>
<span class='code-line'>    &lt;<span class='word-red'>p</span>&gt;名前：&lt;%= @user.family_name %&gt;&lt;%= @user.first_name %&gt;さん（&lt;%= @user.age %&gt;歳）&lt;/<span class='word-red'>p</span>&gt;</span>
<span class='code-line'>    &lt;<span class='word-red'>p</span>&gt;自己紹介：&lt;%= @user.self_introduction %&gt;&lt;/<span class='word-red'>p</span>&gt;</span>
<span class='code-line word-gray'>    &lt;!-- 省略 --&gt;</span>
</td>
</tr>
</table>
  <br>
  これで<strong>「<u>@user</u>」の「<u>image</u>」がある場合とない場合での判別</strong>ができました。
  <hr class="red-hr">
  <i class="fa fa-arrow-right"></i>　<strong>次に「<u>users</u>」データベースの「<u>edit</u>」ページに設定を加えます。</strong>
  <br><br>
  <strong>「<u>app > views > users > edit.html.erb</u>」</strong>の内容を下のように変更して下さい。
  <br><br>
  <i class="fa fa-file color-red"></i>　<strong>edit.html.erb（5、8〜10行目を追加）</strong>
  <br>
  <small>※　半角英数字で入力。変更が完了したら「Command」と「s」を一緒に押して内容を保存して下さい。</small>
<table class='highlight'>
<tr>
<td class='code-line-no text-center'>1
2
3
4
<strong class="color-red">5</strong>
6
7
<strong class="color-red">8
9
10</strong>
11
12
13
14
</td>
<td class='code-content'><span class='code-line'>&lt;<span class='word-red'>h1</span>&gt;ユーザー情報を編集する&lt;/<span class='word-red'>h1</span>&gt;</span>
<span class='code-line'>&lt;<span class='word-red'>hr</span>&gt;</span>
<span class='code-line'>&lt;%= form_for @user <span class="word-red">do</span> |f| %&gt;</span>
<span class='code-line'>  &lt;<span class='word-red'>p</span>&gt;プロフィール画像&lt;/<span class='word-red'>p</span>&gt;</span>
<span class='code-line remarkable-code'>  &lt;% <span class="word-red">if</span> @user.image.present? %&gt;</span>
<span class='code-line'>    &lt;%= image_tag @user.image.url(<span class='word-purple'>:medium</span>) %&gt;</span>
<span class='code-line'>    &lt;<span class='word-red'>br</span>&gt;&lt;<span class='word-red'>br</span>&gt;</span>
<span class="remarkable-code"><span class='code-line'>  &lt;% <span class="word-red">else</span> %&gt;</span>
<span class='code-line'>    &lt;<span class='word-red'>h4</span>&gt;画像はまだ登録されていません&lt;/<span class='word-red'>h4</span>&gt;</span>
<span class='code-line'>  &lt;% <span class="word-red">end</span> %&gt;</span></span>
<span class='code-line'>  &lt;%= f.file_field <span class="word-purple">:image</span>, <span class='word-purple'>:class</span> =&gt; <span class='word-yellow'>"form-control my-form"</span> %&gt;</span>
<span class='code-line'>  &lt;<span class='word-red'>br</span>&gt;</span>
<span class='code-line'>  &lt;<span class='word-red'>p</span>&gt;名字&lt;/<span class='word-red'>p</span>&gt;</span>
<span class='code-line word-gray'>  &lt;!-- 省略 --&gt;</span>
</td>
</tr>
</table>
  <br>
  ここまで条件分岐の設定が完了しました。
  <br><br>
  <i class="fa fa-arrow-right"></i>　<strong>「<u>Paperclip</u>」を使った画像のアップロードは以上になります。</strong>
</h4>